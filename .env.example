# ===== General =====
TZ=Africa/Lagos

# ===== Database / Cache =====
POSTGRES_PASSWORD=wave
POSTGRES_DB=wave
DATABASE_URL=postgres://postgres:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}
REDIS_URL=redis://redis:6379

# ===== Core App =====
CORE_PORT=3000                 # external host port
CORE_PORT_INTERNAL=3000        # container listening port
# If routing via proxy later, you can also set:
# GATEWAY_INTERNAL_URL=http://caddy:80

# ===== Clipper =====
CLIPPER_PORT=8081              # external host port (browser opens this)
CLIPPER_PORT_INTERNAL=8080     # container listening port
# Internal URL used by core-app to call Clipper API inside the docker network
CLIPPER_INTERNAL_URL=http://clipper:${CLIPPER_PORT_INTERNAL}
# Public URL embedded in clip responses (browser-facing)
CLIPPER_PUBLIC_URL=http://localhost:${CLIPPER_PORT}

# ===== Caddy (Proxy) =====
CADDY_HTTP_PORT=8080
CADDY_HTTP_PORT_INTERNAL=80
CADDY_HTTPS_PORT=8443
CADDY_HTTPS_PORT_INTERNAL=443

# ===== n8n =====
N8N_PORT=5678
N8N_PORT_INTERNAL=5678

# ===== Ollama (optional) =====
OLLAMA_PORT=11434
OLLAMA_PORT_INTERNAL=11434
OLLAMA_INTERNAL_URL=http://ollama:${OLLAMA_PORT_INTERNAL}
OLLAMA_GW_PORT=9091
OLLAMA_GW_PORT_INTERNAL=8080

# ===== External AI (optional; example placeholders) =====
GPT_PORT=11434
GPT_PORT_INTERNAL=11434
GPT_INTERNAL_URL=http://gpt:${GPT_PORT_INTERNAL}
GPT_GW_PORT=9091
GPT_GW_PORT_INTERNAL=8080

# ===== Storage / Uploader =====
# Single source of truth for storage backend selection (uploader owns this)
STORAGE_BACKEND=local           # local | s3 | gdrive | onedrive | gcs | azure
# Used by local adapter to build public links for files served by Caddy/Clipper
STORAGE_PUBLIC_BASE=http://localhost:${CLIPPER_PORT}/files

# Uploader service (internal only; no host port needed)
UPLOADER_PORT=8050
UPLOADER_PORT_INTERNAL=8050
CORE_INTERNAL_TOKEN=dev-internal-token   # shared secret for uploader -> core callback

# ===== S3 / R2 / MinIO compatible (only used by uploader) =====
S3_ENDPOINT=                    # e.g. https://s3.amazonaws.com or https://<accountid>.r2.cloudflarestorage.com
S3_REGION=
S3_BUCKET=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# ===== Google Drive (user-scoped; used by uploader) =====
GDRIVE_CLIENT_ID=
GDRIVE_CLIENT_SECRET=
# Per-user tokens are stored in DB, not .env

# ===== OneDrive (user-scoped / MS Graph; used by uploader) =====
ONEDRIVE_CLIENT_ID=
ONEDRIVE_CLIENT_SECRET=
TENANT_ID=common

# ===== Housekeeping =====
# Sweeper retention window (hours) for local temp files in /data
RETAIN_HOURS=24